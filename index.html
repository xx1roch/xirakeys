<!DOCTYPE html>
<html lang="ru">
<head>
    <title>YoxiKey - Генератор ключей для Roblox</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: #000000;  /* Чёрный фон */
            color: #ffffff;  /* Белый текст */
            text-align: center;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;  /* Фон с искрами */
        }
        .container {
            background: rgba(17, 17, 17, 0.8);  /* Тёмно-чёрный блок с прозрачностью */
            border-radius: 15px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        .border-path {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            stroke: #FF0000;  /* Красная линия */
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 2000;  /* Длина линии для анимации */
            stroke-dashoffset: 2000;
            animation: lineAnimation 5s linear infinite;  /* Цикл по часовой стрелке */
        }
        @keyframes lineAnimation {
            to {
                stroke-dashoffset: 0;  /* Движение линии */
            }
        }
        h1 {
            color: #FF0000;  /* Красный заголовок */
            font-size: 32px;
            margin-bottom: 5px;
        }
        h2 {
            color: #FF0000;  /* Красный подзаголовок */
            font-size: 24px;
            margin-bottom: 20px;
        }
        p {
            font-size: 20px;  /* Увеличенный текст */
            margin-bottom: 30px;
            word-wrap: break-word;  /* Подгонка под плашку */
            padding: 0 20px;  /* Отступы для адаптации */
        }
        #key-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }
        #key {
            font-size: 24px;
            color: #FF0000;  /* Красный ключ */
            margin-right: 10px;
        }
        #copyBtn {
            background: #B22222;  /* Тёмно-красная кнопка копирования */
            color: #ffffff;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.3s, transform 0.1s;
        }
        #copyBtn:hover {
            background: #FF0000;
            transform: scale(1.05);
        }
        .left-nav {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
        }
        .nav-btn {
            background: none;
            border: none;
            cursor: pointer;
            margin-bottom: 10px;
        }
        .nav-btn svg {
            width: 32px;
            height: 32px;
        }
    </style>
</head>
<body>
    <canvas id="particles"></canvas>  <!-- Холст для искр -->
    <div class="container">
        <svg class="border-path" viewBox="0 0 500 300" preserveAspectRatio="none">
            <path d="M0,0 L500,0 L500,300 L0,300 Z" />
        </svg>
        <div class="left-nav">
            <button class="nav-btn" onclick="window.open('https://t.me/YomkaMadeIt', '_blank')">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21.5439 2.00098C21.2909 2.09098 4.06894 9.25498 3.66094 9.42098C2.82194 9.77298 3.04294 10.9809 3.83794 10.8239L7.40494 10.0609C7.84494 9.96498 8.30494 10.1079 8.62694 10.4289L12.4029 14.2049C12.7239 14.5259 12.8659 14.9859 12.7709 15.4259L12.0079 18.993C11.8509 19.788 13.0589 20.008 13.4109 19.169C13.5769 18.761 20.7409 1.53998 20.8309 1.28698C20.9289 1.02898 20.8019 0.564976 20.5439 0.456976L4.66994 6.42098L4.66794 6.42298" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <h1>YoxiKey</h1>
        <h2>Your key</h2>
        <p></p>  <!-- Пустой p, если нужно добавить текст позже -->
        <div id="key-container">
            <div id="key"></div>
            <button id="copyBtn" style="display: none;" onclick="copyKey()">Скопировать</button>
        </div>
    </div>
    <script>
        function generateKey() {
            const randomPart = crypto.randomUUID().replace(/-/g, '').substring(0, 12).toUpperCase();  // Рандом 12 символов
            const key = randomPart;  // Просто рандом без даты/UserId
            localStorage.setItem('yoxiKey', key);  // Сохраняем в localStorage
            displayKey(key);
        }

        function displayKey(key) {
            document.getElementById('key').innerHTML = '<strong>' + key + '</strong>';  /* Убрал "Ключ:" */
            document.getElementById('copyBtn').style.display = 'inline-block';
            window.currentKey = key;  // Для копирования
        }

        function copyKey() {
            navigator.clipboard.writeText(window.currentKey).then(() => {
                alert('Ключ скопирован!');
            });
        }

        // Проверяем localStorage при загрузке
        const storedKey = localStorage.getItem('yoxiKey');
        if (storedKey) {
            displayKey(storedKey);  // Показываем существующий ключ, не генерируем новый
        } else {
            generateKey();  // Генерируем новый, если нет
        }

        // Искры от костра (красные/оранжевые частицы, поднимающиеся вверх с свечением)
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particles = [];
        let animationFrameId;
        let particleInterval;

        class Particle {
            constructor(x, y, radius, color, velocity) {
                this.x = x;
                this.y = y;
                this.radius = radius;
                this.color = color;
                this.velocity = velocity;
                this.alpha = 1;
            }
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
                ctx.fillStyle = this.color;
                ctx.shadowColor = this.color;
                ctx.shadowBlur = 15;  // Увеличенное свечение
                ctx.fill();
                ctx.restore();
            }
            update() {
                this.draw();
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= 0.005;  // Затухание
                if (this.alpha < 0) this.alpha = 0;
            }
        }

        function createParticles() {
            const x = Math.random() * canvas.width;
            const y = canvas.height;  // Начинают снизу (как от костра)
            const radius = Math.random() * 3 + 1;
            const colorOptions = ['rgba(255, 69, 0, 1)', 'rgba(255, 165, 0, 1)', 'rgba(255, 0, 0, 1)'];  // Красные/оранжевые цвета искр
            const color = colorOptions[Math.floor(Math.random() * colorOptions.length)];
            const velocity = { x: (Math.random() - 0.5) * 1, y: - (Math.random() * 4 + 2) };  // Ускоренные искры
            particles.push(new Particle(x, y, radius, color, velocity));
        }

        function animate() {
            animationFrameId = requestAnimationFrame(animate);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach((particle, index) => {
                if (particle.alpha > 0) {
                    particle.update();
                } else {
                    particles.splice(index, 1);
                }
            });
        }

        function startParticles() {
            particleInterval = setInterval(createParticles, 50);  // Чаще для эффекта
            animate();
        }

        function stopParticles() {
            clearInterval(particleInterval);
            cancelAnimationFrame(animationFrameId);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Запуск/пауза при видимости страницы
        if (document.visibilityState === 'visible') {
            startParticles();
        }

        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible') {
                startParticles();
            } else {
                stopParticles();
            }
        });

        // Ресайз холста
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
